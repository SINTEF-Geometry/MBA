<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MBA.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.12 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>MBA.h</h1><div class="fragment"><pre>00001 <font class="comment">//================================================================</font>
00002 <font class="comment">//</font>
00003 <font class="comment">// Created: September 18. 2000</font>
00004 <font class="comment">//                                                                           </font>
00005 <font class="comment">// Author: Øyvind Hjelle &lt;Oyvind.Hjelle@math.sintef.no&gt;</font>
00006 <font class="comment">//                                                                           </font>
00007 <font class="comment">// Revised:</font>
00008 <font class="comment">//                                                                           </font>
00009 <font class="comment">// Description:</font>
00010 <font class="comment">//                                                                           </font>
00011 <font class="comment">//================================================================</font>
00012 <font class="comment">// Copyright (c) 2000 SINTEF Applied Mathematics</font>
00013 <font class="comment">//================================================================</font>
00014 
00015 <font class="preprocessor">#ifndef _MBA_H_</font>
00016 <font class="preprocessor"></font><font class="preprocessor">#define _MBA_H_</font>
00017 <font class="preprocessor"></font>
00018 <font class="preprocessor">#include &lt;MBAtypedef.h&gt;</font>
00019 <font class="preprocessor">#include &lt;GenMatrix.h&gt;</font>
00020 <font class="preprocessor">#include &lt;MBAdata.h&gt;</font>
00021 
00022 <font class="preprocessor">#include &lt;vector&gt;</font>
00023 <font class="keyword">using</font> <font class="keyword">namespace </font>std;
00024 
<a name="l00032"></a><a class="code" href="classMBAsplineSurface.html">00032</a> <font class="keyword">class </font><a class="code" href="classMBAsplineSurface.html">MBAsplineSurface</a> {
00033   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="classMBA.html">MBA</a>; <font class="comment">// can delete</font>
00034   <a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a>* PHI_;
00035 <font class="keyword">public</font>:
00036   <font class="comment">// Public data</font>
00037   <font class="keywordtype">double</font> umin_;
00038   <font class="keywordtype">double</font> vmin_;
00039   <font class="keywordtype">double</font> umax_;
00040   <font class="keywordtype">double</font> vmax_;
00041   <font class="keywordtype">double</font> offset_;
00042   <font class="keywordtype">bool</font> C2_;
00043   <font class="keyword">const</font> <a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a>&amp; PHI()<font class="keyword"> const </font>{<font class="keywordflow">return</font> *PHI_;}
00044   
00045   <a class="code" href="classMBAsplineSurface.html">MBAsplineSurface</a>(<a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a>* PHI,
00046     <font class="keywordtype">double</font> umin, <font class="keywordtype">double</font> vmin, 
00047     <font class="keywordtype">double</font> umax, <font class="keywordtype">double</font> vmax,
00048     <font class="keywordtype">double</font> offset, <font class="keywordtype">bool</font> C2 = <font class="keyword">true</font>);
00049 
00050   <a class="code" href="classMBAsplineSurface.html">MBAsplineSurface</a>(<font class="keyword">const</font> <a class="code" href="classMBAsplineSurface.html">MBAsplineSurface</a>&amp; surf);
00051 };
00052 
00053 
00054 <font class="comment">//===========================================================================</font>
00081 <font class="comment"></font><font class="comment">//===========================================================================</font>
<a name="l00082"></a><a class="code" href="classMBA.html">00082</a> <font class="keyword">class </font><a class="code" href="classMBA.html">MBA</a> {
00083   
00084   <a class="code" href="classMBAdata.html">MBAdata</a> data_;
00085   <font class="keywordtype">int</font> m_,n_; <font class="comment">// the lattice is from -1,0,...,m_+1  -1,0,...,n_+1</font>
00086   <a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a> PHI_;
00087   
00088   <a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a> delta_; <font class="comment">// temporary array for BA/MBA algorithm</font>
00089   <a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a> omega_; <font class="comment">// temporary array for BA/MBA algorithm</font>
00090   
00091   <font class="keywordtype">void</font> BAalg();
00092   <font class="keywordtype">double</font> f_pure(<font class="keywordtype">double</font> u, <font class="keywordtype">double</font> v) <font class="keyword">const</font>; <font class="comment">// without base surface, used in MBAalg</font>
00093 
00094   <font class="comment">// For the MBA Algorithm</font>
00095   <font class="keywordtype">void</font>   refineLatticeC2(<a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a>&amp; PSI, <a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a>&amp; PSIprime);
00096   <font class="keywordtype">void</font>   refineLatticeC1(<a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a>&amp; PSI, <a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a>&amp; PSIprime);
00097 
00098   <font class="comment">// Smoothing</font>
00099   <font class="keywordtype">void</font> flagZeros(<a class="code" href="classGenMatrix.html">GenMatrix&lt;bool&gt;</a>&amp; qwe_) <font class="keyword">const</font>;
00100 
00101 <font class="keyword">public</font>:
00102 
00103   <a class="code" href="classMBA.html#a1">MBA</a>(){};
00104 
<a name="l00109"></a><a class="code" href="classMBA.html#a1">00109</a>   <a class="code" href="classMBA.html#a1">MBA</a>(std::vector&lt;double&gt;&amp; U, std::vector&lt;double&gt;&amp; V, std::vector&lt;double&gt;&amp; Z)
00110      {data_.<a class="code" href="classMBAdata.html#a2">init</a>(U, V, Z);}
00111     
00112  ~<a class="code" href="classMBA.html">MBA</a>(){}
00113 
<a name="l00117"></a><a class="code" href="classMBA.html#a3">00117</a>   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a3">init</a>(std::vector&lt;double&gt;&amp; U, std::vector&lt;double&gt;&amp; V, std::vector&lt;double&gt;&amp; Z)
00118      {data_.<a class="code" href="classMBAdata.html#a2">init</a>(U, V, Z);}
00119 
00125   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a3">init</a>(<a class="code" href="classMBAsplineSurface.html">MBAsplineSurface</a>&amp; surf);
00126 
00127 
<a name="l00134"></a><a class="code" href="classMBA.html#a5">00134</a>   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a5">expandDomain</a>(<font class="keywordtype">double</font> Dumin, <font class="keywordtype">double</font> Dvmin, <font class="keywordtype">double</font> Dumax, <font class="keywordtype">double</font> Dvmax)
00135                     {data_.<a class="code" href="classMBAdata.html#c2">expandDomain</a>(Dumin, Dvmin, Dumax, Dvmax);}
00136 
<a name="l00145"></a><a class="code" href="classMBA.html#a6">00145</a>   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a6">setBaseType</a>(MBAbaseType baseType) {data_.<a class="code" href="classMBAdata.html#o4">baseType_</a> = baseType;}
00146   
<a name="l00148"></a><a class="code" href="classMBA.html#a7">00148</a>   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a7">setBaseValue</a>(<font class="keywordtype">double</font> base) {data_.<a class="code" href="classMBAdata.html#o5">offset_</a> = base; data_.<a class="code" href="classMBAdata.html#o4">baseType_</a> = MBA_CONSTVAL;}
00149   
00169   <font class="keywordtype">void</font>   <a class="code" href="classMBA.html#a8">MBAalg</a>(<font class="keywordtype">int</font> m0, <font class="keywordtype">int</font> n0, <font class="keywordtype">int</font> h = 0);
00170   
<a name="l00174"></a><a class="code" href="classMBA.html#a9">00174</a>   <font class="keywordtype">double</font> <a class="code" href="classMBA.html#a9">f</a>(<font class="keywordtype">double</font> u, <font class="keywordtype">double</font> v)<font class="keyword"> const </font>{<font class="keywordflow">return</font> (f_pure(u,v) + data_.<a class="code" href="classMBAdata.html#a15">f</a>());}
00175   
00183   <font class="keywordtype">double</font> <a class="code" href="classMBA.html#a9">f</a>(<font class="keywordtype">int</font> i, <font class="keywordtype">int</font> j) <font class="keyword">const</font>;
00184 
00188   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a11">gradf</a>(<font class="keywordtype">double</font> u, <font class="keywordtype">double</font> v, <font class="keywordtype">double</font>&amp; gx, <font class="keywordtype">double</font>&amp; gy, <font class="keywordtype">double</font>&amp; gz) <font class="keyword">const</font>;
00189 
00193   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a11">gradf</a>(<font class="keywordtype">int</font> i, <font class="keywordtype">int</font> j, <font class="keywordtype">double</font>&amp; gx, <font class="keywordtype">double</font>&amp; gy, <font class="keywordtype">double</font>&amp; gz) <font class="keyword">const</font>;
00194 
00195 
00196   <font class="comment">// The following three functions are not properly tested and are thus</font>
00197   <font class="comment">// not tagged for documentation with doxygen</font>
00198   <font class="comment">// ------------------------------------------------------------------</font>
00199 
00200   <font class="comment">/* Evaluates derivatives in x- and y-direction in position (u,v).</font>
00201 <font class="comment">   * (u,v) must be inside the domain, see MBAdata</font>
00202 <font class="comment">   */</font>
00203   <font class="keywordtype">void</font> derivatives(<font class="keywordtype">double</font> u, <font class="keywordtype">double</font> v, <font class="keywordtype">double</font>&amp; dx, <font class="keywordtype">double</font>&amp; dy) <font class="keyword">const</font>;
00204 
00205   <font class="comment">/* Evaluates second derivatives in x- and y-direction in position (u,v).</font>
00206 <font class="comment">   * (u,v) must be inside the domain, see MBAdata</font>
00207 <font class="comment">   */</font>
00208   <font class="keywordtype">void</font> secondDerivatives(<font class="keywordtype">double</font> u, <font class="keywordtype">double</font> v, <font class="keywordtype">double</font>&amp; ddx, <font class="keywordtype">double</font>&amp; ddy, <font class="keywordtype">double</font>&amp; dxdy) <font class="keyword">const</font>;
00209 
00210   <font class="comment">/* Evaluates both profile- and planform curvature in position (u,v).</font>
00211 <font class="comment">   * (u,v) must be inside the domain, see MBAdata</font>
00212 <font class="comment">   */</font>
00213   <font class="keywordtype">void</font> curvatures(<font class="keywordtype">double</font> u, <font class="keywordtype">double</font> v, <font class="keywordtype">double</font>&amp; profC, <font class="keywordtype">double</font>&amp; planC) <font class="keyword">const</font>;
00214   
00220   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a16">eval</a>(<font class="keywordtype">double</font> u, <font class="keywordtype">double</font> v, <font class="keywordtype">double</font>&amp; z, <font class="keywordtype">double</font>&amp; gx, <font class="keywordtype">double</font>&amp; gy, <font class="keywordtype">double</font>&amp; gz) <font class="keyword">const</font>;
00221 
00225   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a16">eval</a>(<font class="keywordtype">int</font> i, <font class="keywordtype">int</font> j, <font class="keywordtype">double</font>&amp; z, <font class="keywordtype">double</font>&amp; gx, <font class="keywordtype">double</font>&amp; gy, <font class="keywordtype">double</font>&amp; gz) <font class="keyword">const</font>;
00226   
<a name="l00228"></a><a class="code" href="classMBA.html#a18">00228</a>         <font class="keyword">const</font> <a class="code" href="classMBAdata.html">MBAdata</a>&amp; <a class="code" href="classMBA.html#a18">getData</a>()<font class="keyword"> const </font>{<font class="keywordflow">return</font> data_;}
00229 
<a name="l00231"></a><a class="code" href="classMBA.html#a19">00231</a>   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a19">readScatteredData</a>(<font class="keywordtype">char</font> filename[]) {data_.<a class="code" href="classMBAdata.html#a14">readScatteredData</a>(filename);}
00232 
00234   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a20">smoothZeros</a>(<font class="keywordtype">int</font> no_iter);
00235 
<a name="l00242"></a><a class="code" href="classMBA.html#a21">00242</a>   <a class="code" href="classMBAsplineSurface.html">MBAsplineSurface</a> <a class="code" href="classMBA.html#a21">getSplineSurface</a>() {<font class="keywordflow">return</font> <a class="code" href="classMBAsplineSurface.html">MBAsplineSurface</a>(&amp;PHI_, data_.<a class="code" href="classMBAdata.html#a3">umin</a>(), data_.<a class="code" href="classMBAdata.html#a4">vmin</a>(),
00243                                        data_.<a class="code" href="classMBAdata.html#a5">umax</a>(), data_.<a class="code" href="classMBAdata.html#a6">vmax</a>(),
00244                                        data_.<a class="code" href="classMBAdata.html#o5">offset_</a>);}
00245 
<a name="l00250"></a><a class="code" href="classMBA.html#a22">00250</a>   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a22">getIndexDomain</a>(<font class="keywordtype">int</font>&amp; m, <font class="keywordtype">int</font>&amp; n)<font class="keyword"> const </font>{m = m_; n = n_;}
00251 
00260   <font class="keywordtype">void</font> <a class="code" href="classMBA.html#a23">cleanup</a>(<font class="keywordtype">int</font> type = 0);
00261   
00262   <font class="comment">// (Temporary) utilities</font>
00263   <font class="keywordtype">void</font>  checkSparsity() <font class="keyword">const</font>;
00264   <font class="keyword">const</font> <a class="code" href="classGenMatrix.html">GenMatrix&lt;MBA_real&gt;</a>&amp; PHI()<font class="keyword"> const </font>{<font class="keywordflow">return</font> PHI_;}
00265   <font class="keywordtype">void</font>  printSplineSurface(<font class="keywordtype">char</font> filename[]) <font class="keyword">const</font>;
00266 };
00267 
00268 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated on Mon Jan 21 12:06:05 2002 for MBA by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.12 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
