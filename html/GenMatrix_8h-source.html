<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GenMatrix.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.12 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>GenMatrix.h</h1><div class="fragment"><pre>00001 <font class="comment">//================================================================</font>
00002 <font class="comment">//</font>
00003 <font class="comment">// Created: September 18. 2000</font>
00004 <font class="comment">//                                                                           </font>
00005 <font class="comment">// Author: Øyvind Hjelle &lt;Oyvind.Hjelle@math.sintef.no&gt;</font>
00006 <font class="comment">//                                                                           </font>
00007 <font class="comment">// Revised:</font>
00008 <font class="comment">//                                                                           </font>
00009 <font class="comment">// Description:</font>
00010 <font class="comment">//                                                                           </font>
00011 <font class="comment">//================================================================</font>
00012 <font class="comment">// Copyright (c) 2000 SINTEF Applied Mathematics</font>
00013 <font class="comment">//================================================================</font>
00014 
00015 <font class="preprocessor">#ifndef _GenMatrix_h_</font>
00016 <font class="preprocessor"></font><font class="preprocessor">#define _GenMatrix_h_</font>
00017 <font class="preprocessor"></font>
00018 <font class="preprocessor">#include &lt;iostream&gt;</font>
00019 <font class="keyword">using</font> <font class="keyword">namespace </font>std;
00020 
00021 <font class="comment">//#define ARRAY_CHECK 1</font>
00022 
00023 <font class="preprocessor">#ifdef ARRAY_CHECK</font>
00024 <font class="preprocessor"></font><font class="keyword">static</font> <font class="keywordtype">void</font> myMessage(<font class="keywordtype">int</font> i, <font class="keywordtype">int</font> j) {
00025   cout &lt;&lt; <font class="stringliteral">"Matrix out of range: ("</font> &lt;&lt; i &lt;&lt; <font class="stringliteral">","</font> &lt;&lt; j &lt;&lt; <font class="stringliteral">")"</font> &lt;&lt; endl; 
00026   cout &lt;&lt; <font class="stringliteral">" press [return]"</font> &lt;&lt; endl;
00027   getchar();
00028 }
00029 <font class="preprocessor">#endif</font>
00030 <font class="preprocessor"></font>
00031 <font class="comment">//===========================================================================</font>
00041 <font class="comment"></font><font class="comment">//===========================================================================</font>
00042 
00043 <font class="keyword">template</font> &lt;<font class="keyword">class</font> Type&gt;
<a name="l00044"></a><a class="code" href="classGenMatrix.html">00044</a> <font class="keyword">class </font><a class="code" href="classGenMatrix.html">GenMatrix</a> {
00045   Type** arr_;
00046   <font class="keywordtype">int</font> noX_, noY_;
00047   <font class="keywordtype">int</font> rX_, rY_; <font class="comment">// reserved space</font>
00048 <font class="keyword">public</font>:
00049   <a class="code" href="classGenMatrix.html">GenMatrix</a>() {arr_ = NULL; noX_ = noY_ = rX_ = rY_ = 0;}
00050   <a class="code" href="classGenMatrix.html">GenMatrix</a>(<font class="keywordtype">int</font> noX, <font class="keywordtype">int</font>  noY)
00051   {noX_ = noY_ = rX_ = rY_ = 0; arr_ = NULL; resize(noX, noY);}
00052   ~<a class="code" href="classGenMatrix.html">GenMatrix</a>() {clear();}
00053 
00054 
00055   <a class="code" href="classGenMatrix.html">GenMatrix</a>(<font class="keyword">const</font> <a class="code" href="classGenMatrix.html">GenMatrix</a>&amp; G) { <font class="comment">// copy constructor</font>
00056     <font class="comment">// By purpose, the copy constructor is not implemented.</font>
00057     <font class="comment">// Use the init function instead.</font>
00058     cout &lt;&lt; <font class="stringliteral">"GenMatrix:: copy constructor not implemented, use init()"</font> &lt;&lt; endl;
00059     cout &lt;&lt; <font class="stringliteral">"EXIT FROM GenMatrix:: copy constructor"</font> &lt;&lt; endl;
00060 
00061     exit(-1);
00062   }
00063   
00064   
00065   <font class="keywordtype">void</font> init(<font class="keyword">const</font> <a class="code" href="classGenMatrix.html">GenMatrix</a>&amp; G) { <font class="comment">// instead of copy constructor</font>
00066     clear();
00067     reserve(G.<a class="code" href="classGenMatrix.html#o3">rX_</a>,G.<a class="code" href="classGenMatrix.html#o4">rY_</a>);
00068     resize(G.<a class="code" href="classGenMatrix.html#o1">noX_</a>,G.<a class="code" href="classGenMatrix.html#o2">noY_</a>);
00069     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j = 0; j &lt; noY_; j++) {
00070       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; noX_; i++) {
00071         arr_[j][i] = G.<a class="code" href="classGenMatrix.html#o0">arr_</a>[j][i];
00072       }
00073     }
00074   }
00075 
00076 
00077   <font class="keywordtype">void</font> swap(<a class="code" href="classGenMatrix.html">GenMatrix</a>&amp; mat) {
00078     std::swap(arr_, mat.<a class="code" href="classGenMatrix.html#o0">arr_</a>);
00079     std::swap(noX_, mat.<a class="code" href="classGenMatrix.html#o1">noX_</a>);
00080     std::swap(noY_, mat.<a class="code" href="classGenMatrix.html#o2">noY_</a>);
00081     std::swap(rX_ , mat.<a class="code" href="classGenMatrix.html#o3">rX_</a>);
00082     std::swap(rY_ , mat.<a class="code" href="classGenMatrix.html#o4">rY_</a>);
00083   }
00084 
00085   <font class="keywordtype">void</font> operator += (<a class="code" href="classGenMatrix.html">GenMatrix</a>&amp; mat) {
00086     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j = 0; j &lt; noY_; j++) {
00087       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; noX_; i++) {
00088         arr_[j][i] += mat.<a class="code" href="classGenMatrix.html#o0">arr_</a>[j][i];
00089       }
00090     }
00091   }
00092 
00093   <font class="comment">// Temporary ?</font>
00094   <font class="keywordtype">void</font> operator += (<font class="keywordtype">double</font> offset) {
00095     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j = 0; j &lt; noY_; j++) {
00096       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; noX_; i++) {
00097         arr_[j][i] += offset;
00098       }
00099     }
00100   }
00101   
00102   <font class="comment">// Note that resize does not preserve content</font>
00103   <font class="keywordtype">void</font> resize(<font class="keywordtype">int</font> noX, <font class="keywordtype">int</font> noY) {
00104     <font class="keywordflow">if</font> (noX &gt; rX_ || noY &gt; rY_) {
00105       clear();
00106       rX_ = noX; rY_ = noY; <font class="comment">// reserved = allocated</font>
00107       arr_ = <font class="keyword">new</font> Type*[rY_];
00108       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j = 0; j &lt; rY_; j++)
00109         arr_[j] = <font class="keyword">new</font> Type[rX_];
00110     }
00111     noX_ = noX; noY_ = noY;
00112   }
00113   
00114   <font class="keywordtype">void</font> reserve(<font class="keywordtype">int</font> rX, <font class="keywordtype">int</font> rY) {resize(rX, rY); noX_ = 0; noY_ = 0;}
00115 
00116   <font class="keywordtype">void</font> clear() {
00117     <font class="keywordflow">if</font> (arr_) {
00118       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j = 0; j &lt; rY_; j++)
00119         <font class="keyword">delete</font> [] arr_[j];
00120       <font class="keyword">delete</font> [] arr_;
00121       arr_ = NULL;
00122     }
00123     rX_ = rY_ = noX_ = noY_ = 0;
00124   }
00125   
00126   <font class="keyword">inline</font> <font class="keywordtype">int</font> noX()<font class="keyword"> const </font>{<font class="keywordflow">return</font> noX_;}
00127   <font class="keyword">inline</font> <font class="keywordtype">int</font> noY()<font class="keyword"> const </font>{<font class="keywordflow">return</font> noY_;}
00128   <font class="keywordtype">void</font> capacity(<font class="keywordtype">int</font>&amp; rX, <font class="keywordtype">int</font>&amp; rY)<font class="keyword"> const </font>{rX = rX_; rY_ = rY;}
00129   
00130   <font class="keyword">inline</font> <font class="keyword">const</font> Type&amp; operator()(<font class="keywordtype">int</font> ii, <font class="keywordtype">int</font> jj)<font class="keyword"> const </font>{
00131     
00132 <font class="preprocessor">#ifdef ARRAY_CHECK</font>
00133 <font class="preprocessor"></font>    <font class="keywordtype">int</font> i = ii+1;
00134     <font class="keywordtype">int</font> j = jj+1;
00135     <font class="keywordflow">if</font> (i &lt; 0 || i &gt;= noX_ || j &lt; 0 || j &gt;= noY_)
00136       myMessage(ii,jj);
00137 <font class="preprocessor">#endif</font>
00138 <font class="preprocessor"></font>    <font class="keywordflow">return</font> arr_[jj+1][ii+1];
00139   }
00140   
00141   <font class="keyword">inline</font>       Type&amp; operator()(<font class="keywordtype">int</font> ii, <font class="keywordtype">int</font> jj) {
00142     
00143 <font class="preprocessor">#ifdef ARRAY_CHECK</font>
00144 <font class="preprocessor"></font>    <font class="keywordtype">int</font> i = ii+1;
00145     <font class="keywordtype">int</font> j = jj+1;
00146     <font class="keywordflow">if</font> (i &lt; 0 || i &gt;= noX_ || j &lt; 0 || j &gt;= noY_)
00147       myMessage(ii,jj);
00148 <font class="preprocessor">#endif</font>
00149 <font class="preprocessor"></font>    <font class="keywordflow">return</font> arr_[jj+1][ii+1];
00150   }
00151   
00152   
00153   <font class="keywordtype">void</font> fill(Type val) {
00154     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j = 0; j &lt; noY_; j++)
00155       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; noX_; i++)
00156         arr_[j][i] = val;
00157   }
00158   
00159   
00160   <font class="keywordtype">void</font> print()<font class="keyword"> const </font>{
00161     cout &lt;&lt; <font class="stringliteral">"Matrix..."</font> &lt;&lt; endl;
00162     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j = 0; j &lt; noY_; j++) {
00163       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; noX_; i++) {
00164         cout &lt;&lt; arr_[j][i] &lt;&lt; <font class="stringliteral">" "</font>;
00165       }
00166       cout &lt;&lt; endl;
00167     }
00168   }
00169   
00170   
00171   <font class="keywordtype">void</font> printBitmap()<font class="keyword"> const </font>{
00172     <font class="comment">//cout &lt;&lt; "GenMatrix::printBitmap... " &lt;&lt; arr_[noY_-1][0] &lt;&lt; endl;</font>
00173     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j = 0; j &lt; noY_; j++) {
00174       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; noX_; i++) {
00175         <font class="keywordflow">if</font> (arr_[j][i] == 0)
00176           cout &lt;&lt; 0;
00177         <font class="keywordflow">else</font>
00178           cout &lt;&lt; 1;
00179       }
00180       cout &lt;&lt; endl;
00181     }  
00182   }
00183 };
00184 
00185 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated on Mon Jan 21 12:06:05 2002 for MBA by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.12 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
